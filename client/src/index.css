@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== 디자인 토큰 (스프라이트/박스셰도우용) ===== */
/* 컴포넌트 색상은 tailwind.config.js가 source of truth */
:root {
  /* Backgrounds */
  --bg-dark: #0d0221;
  --bg-mid: #1a0533;
  --ui-bg: #101028;

  /* Primary Accents */
  --pink: #e84393;
  --purple: #6c5ce7;
  --gold: #fdcb6e;

  /* Secondary */
  --lavender: #a29bfe;
  --orange: #e67e22;
  --green: #2ecc71;
  --green-dark: #1e6b35;
  --red: #e74c3c;
  --blue: #3498db;
  --cyan: #00cec9;

  /* UI Chrome */
  --ui-border: #f8f8f8;
  --ui-shadow: rgba(0, 0, 0, 0.5);

  /* Skin / NPC */
  --skin-light: #ffeaa7;
  --skin-mid: #f6e58d;
  --wood: #8e6630;
  --trunk: #5D4037;

  /* Metal (Starman 계열) */
  --metal-light: #dfe6e9;
  --metal-mid: #a4b0be;
  --metal-dark: #636e72;

  /* Pixel grid */
  --pixel: 4px;

  /* Typography */
  --font-title: 'Press Start 2P', monospace;
  --font-body: 'Silkscreen', monospace;
}

/* 기본 스타일 */
body {
  @apply bg-midnight-800 text-slate-100 font-sans m-0 p-0;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* 모바일 터치 최적화 */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  user-select: none;
  /* 세로 화면 고정 */
  overflow-x: hidden;
  min-height: 100dvh;
}

#root {
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
}

/* 스크롤바 숨기기 (모바일 게임 UI) */
::-webkit-scrollbar {
  display: none;
}

/* 안전 영역 (아이폰 노치) */
@supports (padding: env(safe-area-inset-top)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* ===== EarthBound UI 윈도우 ===== */
@layer components {
  .eb-window {
    background: var(--ui-bg);
    border: 3px solid var(--ui-border);
    border-radius: 6px;
    padding: 12px 16px;
    box-shadow: var(--pixel) var(--pixel) 0 var(--ui-shadow);
  }
}

/* ===== 스캔라인 오버레이 ===== */
.scanlines {
  position: absolute;
  inset: 0;
  z-index: 50;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 3px,
    rgba(0, 0, 0, 0.08) 3px,
    rgba(0, 0, 0, 0.08) 4px
  );
}

/* ===== 가로 모드 차단 ===== */
#landscape-block {
  display: none;
}

@media (orientation: landscape) and (max-height: 500px) {
  #landscape-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 16px;
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: #0f0f1a;
    color: #f8fafc;
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 16px;
    text-align: center;
  }

  #landscape-block p:first-child {
    font-size: 48px;
  }

  #root {
    display: none;
  }
}
